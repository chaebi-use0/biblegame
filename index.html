<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°”ì´ë¸” ë§ˆë¸”_by use0</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Gamja+Flower&family=Black+Han+Sans&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #8D6E63;
            --board-bg: #FFF8E1;
            --accent-color: #FFC107;
            --current-turn-color: #8D6E63;
            --current-turn-bg: #E0F7FA;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Jua', sans-serif; }

        body {
            background-color: #FFECB3;
            background-image: radial-gradient(#fff 10%, transparent 10%);
            background-size: 20px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            transition: background-color 0.5s ease;
        }

        #game-container {
            width: 100%;
            max-width: 800px;
            height: 98vh;
            background-color: white;
            border-radius: 25px;
            border: 8px solid var(--current-turn-color);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            position: relative;
            transition: border-color 0.5s ease;
            overflow: hidden;
        }

        #status-bar {
            height: 50px;
            background: var(--current-turn-color);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 1.3rem;
            transition: background-color 0.5s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 10;
            flex-shrink: 0;
        }

        #top-message {
            background-color: var(--current-turn-bg);
            color: #546E7A;
            text-align: center;
            padding: 10px 0;
            font-family: 'Gamja Flower', cursive;
            font-size: 1.8rem;
            line-height: 1.3;
            text-shadow: 1px 1px 0 rgba(255,255,255,0.8);
            transition: background-color 0.5s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80px;
            flex-shrink: 0;
        }

        #board-wrapper {
            flex: 1; /* ë‚¨ì€ ê³µê°„ì„ ì°¨ì§€í•˜ì—¬ ì¤‘ì•™ ì •ë ¬ */
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 5px 10px;
            overflow: hidden;
            background-color: var(--current-turn-bg);
            transition: background-color 0.5s ease;
        }

        #board {
            width: 100%;
            max-width: 58vh; /* íŒ¨ë„ ê³µê°„ í™•ë³´ë¥¼ ìœ„í•´ ì•½ê°„ ì¶•ì†Œ */
            aspect-ratio: 1 / 1;
            background-color: var(--board-bg);
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            grid-template-rows: repeat(6, 1fr);
            gap: 3px;
            border-radius: 15px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            padding: 3px;
        }

        /* ì¤‘ê°„ ì»¨íŠ¸ë¡¤ (ê·œì¹™ ë²„íŠ¼) ì˜ì—­ */
        #mid-controls {
            background-color: var(--current-turn-bg);
            padding: 5px 20px;
            display: flex;
            justify-content: flex-end; /* ì˜¤ë¥¸ìª½ ì •ë ¬ */
            transition: background-color 0.5s ease;
            flex-shrink: 0;
        }

        .rules-btn {
            background-color: #607D8B;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 3px 0 #455A64;
            font-family: 'Jua';
            transition: transform 0.1s;
        }
        .rules-btn:active { transform: translateY(3px); box-shadow: none; }

        .tile {
            background-color: #fff;
            border-radius: 5px;
            position: relative;
            overflow: hidden;
            border: 2px solid #ddd;
            transition: all 0.3s ease;
            background-image: url('bible_bg.jpg'); 
            background-size: 500% 300%;
            background-repeat: no-repeat;
        }

        .tile.unowned { filter: grayscale(100%); opacity: 0.9; }
        .tile.owned { filter: grayscale(0%); opacity: 1; border-width: 4px; z-index: 1; }
        .tile.special-tile { filter: grayscale(0%); }

        .bg-pentateuch { background-position: 0% 0%; }
        .bg-history    { background-position: 25% 0%; }
        .bg-minor      { background-position: 50% 0%; }
        .bg-major      { background-position: 75% 0%; }
        .bg-poetry     { background-position: 100% 0%; }
        .bg-gospels    { background-position: 0% 50%; }
        .bg-acts       { background-position: 25% 50%; }
        .bg-revelation { background-position: 50% 50%; }
        .bg-pauline    { background-position: 75% 50%; }
        .bg-general    { background-position: 100% 50%; }
        .bg-start      { background-position: 0% 100%; }
        .bg-wilderness { background-position: 25% 100%; }
        .bg-sharing    { background-position: 50% 100%; }
        .bg-key        { background-position: 75% 100%; }
        .bg-rest       { background-position: 100% 100%; }

        .tile-name { 
            position: absolute; top: 7%; left: 50%; transform: translateX(-50%);
            font-size: 0.65rem; font-weight: bold; color: #3E2723;
            text-shadow: 1px 1px 0 rgba(255,255,255,0.8); white-space: nowrap; z-index: 2;
            padding: 1px 4px; border-radius: 4px; background: rgba(255,255,255,0.6);
        }
        
        .tile-price { 
            position: absolute; bottom: 5%; left: 50%; transform: translateX(-50%);
            font-size: 0.6rem; color: white; background: rgba(0,0,0,0.6);
            padding: 1px 5px; border-radius: 10px; z-index: 2;
            transition: background-color 0.3s;
        }

        .pot-amount {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(255, 215, 0, 0.9); color: #E65100;
            padding: 2px 6px; border-radius: 10px; font-size: 0.7rem; font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2); z-index: 3; display: none;
        }

        .player-token {
            min-width: 44px; height: 34px; padding: 0 10px;
            border-radius: 20px; border: 3px solid white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: absolute; z-index: 20;
            display: flex; justify-content: center; align-items: center;
            color: white; font-size: 0.9rem;
            text-shadow: 1px 1px 0 rgba(0,0,0,0.3); white-space: nowrap;
            transform: translate(-50%, -50%); 
        }

        #center-panel {
            grid-column: 2 / span 4; grid-row: 2 / span 4;
            background-color: rgba(255, 253, 231, 0.95);
            border-radius: 20px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center;
            box-shadow: inset 0 0 15px rgba(255, 193, 7, 0.2);
            z-index: 5;
            border: 4px dashed #FFD54F;
        }

        .center-title {
            font-family: 'Black Han Sans', sans-serif;
            font-size: 2.5rem;
            line-height: 1.1;
            margin-bottom: 10px;
            background: linear-gradient(to right, #FF5252, #FFC107, #2196F3);
            -webkit-background-clip: text;
            color: transparent;
            text-shadow: 3px 3px 0px rgba(0,0,0,0.1);
            transform: rotate(-3deg);
            animation: party 1.5s infinite alternate;
        }
        @keyframes party {
            from { transform: rotate(-3deg) scale(1); }
            to { transform: rotate(3deg) scale(1.05); }
        }

        #dice-container { 
            display: flex; gap: 15px; margin: 5px 0; cursor: pointer; padding: 10px;
            background: rgba(255,255,255,0.6); border-radius: 20px; transition: transform 0.1s;
        }
        #dice-container:active { transform: scale(0.95); }

        .die {
            width: 50px; height: 50px; background: white;
            border-radius: 12px; border: 2px solid #eee;
            box-shadow: 0 5px 0 #ccc, 0 10px 10px rgba(0,0,0,0.1);
            display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr);
            padding: 4px; gap: 3px;
        }
        .die .dot { width: 9px; height: 9px; background-color: #5D4037; border-radius: 50%; align-self: center; justify-self: center; }
        .rolling .die { animation: shake 0.3s infinite; }

        #game-log {
            width: 90%; height: 50px; background: white;
            border: 2px solid #FFECB3; border-radius: 10px; padding: 8px;
            overflow-y: auto; font-size: 0.9rem; text-align: left;
            margin-top: 10px; color: #5D4037;
        }

        #player-panel {
            height: 130px; background-color: #FFF3E0;
            display: flex; overflow-x: auto; flex-shrink: 0; border-top: 4px solid #FFE0B2;
            position: relative;
        }

        .player-card {
            flex: 1; min-width: 100px;
            border-right: 2px dashed #FFCC80; padding: 10px; color: #5D4037;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0.6; transition: 0.3s; position: relative;
        }
        .player-card.active { 
            opacity: 1; background: white; transform: scale(1.05); z-index: 10;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            border-radius: 10px 10px 0 0;
            border: 2px solid var(--accent-color); border-bottom: none;
        }
        .player-name { font-size: 1.1rem; margin-bottom: 5px; }
        .player-money { font-size: 1.2rem; color: #E65100; font-family: 'Gamja Flower'; }

        .modal {
            display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6); justify-content: center; align-items: center; backdrop-filter: blur(4px);
        }
        .modal-content {
            background-color: white; border-radius: 20px;
            width: 90%; max-width: 450px; text-align: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            padding: 0; overflow: hidden; max-height: 80vh; overflow-y: auto;
        }
        .modal-header { background-color: #FFB74D; padding: 15px; color: white; font-size: 1.5rem; font-weight: bold; }
        .modal-body { padding: 25px; }
        .quiz-badge {
            display: inline-block; background-color: #E0F7FA; color: #006064;
            padding: 5px 12px; border-radius: 15px; font-size: 1rem;
            margin-bottom: 10px; font-weight: bold;
        }
        .quiz-text { font-size: 1.4rem; color: #333; line-height: 1.4; margin-bottom: 20px; }
        
        .rules-text { font-size: 1rem; text-align: left; line-height: 1.6; color: #444; }
        .rules-text h4 { color: #E65100; margin-bottom: 5px; margin-top: 15px; }

        .btn { 
            font-family: 'Jua'; font-size: 1.2rem; border-radius: 12px;
            padding: 12px; margin: 5px 0; width: 100%; cursor: pointer;
            border: none; transition: 0.2s;
        }
        .btn-yes { background-color: #FF7043; color: white; box-shadow: 0 4px 0 #D84315; }
        .btn-yes:active { transform: translateY(4px); box-shadow: none; }
        .btn-quiz { background-color: white; border: 2px solid #FFCC80; color: #5D4037; }
        .btn-quiz:hover { background-color: #FFF3E0; }
        .btn-quiz:active { background-color: #FFE0B2; }

        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        /* íš¨ê³¼ë“¤ */
        .shake-effect { animation: shake 0.5s; }
        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } 100% { transform: translate(1px, -2px) rotate(-1deg); } }
        .confetti { position: absolute; width: 10px; height: 10px; background-color: #f00; top: 50%; left: 50%; opacity: 0; z-index: 1000; pointer-events: none; }

        #setup-screen {
            background: #8D6E63;
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E");
        }
        .setup-btn {
            background: #FFCA28; color: #3E2723; border-radius: 15px;
            font-size: 1.5rem; padding: 15px 40px; margin: 10px;
            border: none; cursor: pointer; box-shadow: 0 6px 0 #FF6F00;
        }
        .setup-btn:active { box-shadow: 0 2px 0 #FF6F00; transform: translateY(4px); }
        .name-input {
            border: 3px solid #FFB74D; background: #FFFDE7;
            font-family: 'Jua'; font-size: 1.3rem;
            display: block; margin: 12px auto; padding: 14px; border-radius: 8px; width: 280px; text-align: center;
        }

    </style>
</head>
<body>

    <div id="game-container">
        <div id="status-bar">
            <span>ğŸš€ ë°”ì´ë¸” ë§ˆë¸”_by use0</span>
            <span id="turn-indicator" style="font-size: 1.2rem;">ëŒ€ê¸° ì¤‘...</span>
        </div>

        <div id="top-message">
            ì‚¬ë‘í•˜ëŠ” ì±„ë¹„ ì¹œêµ¬ë“¤! <br> ì´ë²ˆ ì„¤ë‚ ì—ëŠ” ì´ê±°í•˜ê³  ë†€ì~ğŸ’–
        </div>

        <div id="board-wrapper">
            <div id="board">
                <div id="center-panel">
                    <div class="center-title">
                        ì±„ë¹„<br>ë°”ì´ë¸” ë§ˆë¸”
                    </div>
                    <div id="dice-container" onclick="if(typeof game !== 'undefined' && game) game.rollDice()">
                        <div class="die" id="die1"></div>
                        <div class="die" id="die2"></div>
                    </div>
                    <div id="game-log">ì£¼ì‚¬ìœ„ë¥¼ êµ´ë ¤ì£¼ì„¸ìš”!</div>
                </div>
            </div>
        </div>

        <!-- ê²Œì„ ê·œì¹™ ë²„íŠ¼ ì˜ì—­ (ê²Œì„íŒê³¼ í”Œë ˆì´ì–´ íŒ¨ë„ ì‚¬ì´) -->
        <div id="mid-controls">
            <button class="rules-btn" onclick="document.getElementById('rules-modal').style.display='flex'">ğŸ“œ ê²Œì„ ê·œì¹™</button>
        </div>

        <div id="player-panel"></div>
    </div>

    <div id="setup-screen">
        <div id="setup-step-1" style="text-align: center;">
            <h1 style="font-size: 3.5rem; margin-bottom: 10px; color: #FFECB3; text-shadow: 3px 3px 0 #3E2723;">ë°”ì´ë¸” ë§ˆë¸”</h1>
            <p style="font-size: 1.5rem; margin-bottom: 30px; color: #FFCC80;">í•¨ê»˜ í•  ì¹œêµ¬ë“¤ì€ ëª‡ ëª…ì¸ê°€ìš”?</p>
            <div>
                <button class="setup-btn" onclick="setupNames(2)">2ëª…</button>
                <button class="setup-btn" onclick="setupNames(3)">3ëª…</button>
                <button class="setup-btn" onclick="setupNames(4)">4ëª…</button>
            </div>
        </div>
        <div id="setup-step-2" style="display: none; text-align: center;">
            <h1 style="color: #FFECB3;">ì´ë¦„ì„ ì•Œë ¤ì¤˜!</h1>
            <div id="name-inputs-container"></div>
            <button class="setup-btn" onclick="startGameWithNames()" style="margin-top: 20px;">ì¶œë°œ! ğŸšŒ</button>
        </div>
    </div>

    <!-- í€´ì¦ˆ ëª¨ë‹¬ -->
    <div id="quiz-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #4FC3F7;">
                ğŸ“– <span id="quiz-category"></span> í€´ì¦ˆ
            </div>
            <div class="modal-body">
                <div id="quiz-context" class="quiz-badge">ìƒí™© ì„¤ëª…</div>
                <p id="quiz-question" class="quiz-text">ì§ˆë¬¸ ë‚´ìš©</p>
                <div id="quiz-options"></div>
            </div>
        </div>
    </div>

    <!-- ì•Œë¦¼ ëª¨ë‹¬ -->
    <div id="action-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header" id="action-title">ì•Œë¦¼ ğŸ””</div>
            <div class="modal-body">
                <p id="action-msg" class="quiz-text">ë©”ì‹œì§€ ë‚´ìš©</p>
                <button class="btn btn-yes" id="btn-confirm">ì•Œê² ì–´ìš”!</button>
            </div>
        </div>
    </div>

    <!-- ê·œì¹™ ëª¨ë‹¬ -->
    <div id="rules-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #8D6E63;">ğŸ“œ ê²Œì„ ê·œì¹™</div>
            <div class="modal-body rules-text">
                <h4>1. ê²Œì„ ëª©í‘œ</h4>
                <p>ì„±ê²½ ì§€ì‹ì„ ë½ë‚´ë©° ì„ êµì§€ë¥¼ ê°œì²™í•˜ê³  ê°€ì¥ ë§ì€ ë‹¬ë€íŠ¸ë¥¼ ëª¨ìœ¼ì„¸ìš”! <strong>ëª¨ë“  ë•…ì´ ê°œì²™ëœ í›„, ëˆ„êµ°ê°€ ì¶œë°œì ì„ í†µê³¼</strong>í•˜ë©´ ê²Œì„ì´ ì¢…ë£Œë©ë‹ˆë‹¤.</p>
                
                <h4>2. ì´ë™ ë° í€´ì¦ˆ</h4>
                <p>ì£¼ì‚¬ìœ„ë¥¼ êµ´ë ¤ ì´ë™í•©ë‹ˆë‹¤. ë¹ˆ ë•…ì— ë„ì°©í•˜ë©´ í€´ì¦ˆë¥¼ í’€ê³  ë•…ì„ ì‚´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì •ë‹µ: êµ¬ë§¤ ì„±ê³µ / ì˜¤ë‹µ: êµ¬ë§¤ ì‹¤íŒ¨)</p>
                
                <h4>3. í†µí–‰ë£Œì™€ ê°•í™”</h4>
                <p>ë‹¤ë¥¸ ì¹œêµ¬ì˜ ë•…ì— ë„ì°©í•˜ë©´ í€´ì¦ˆ ëŒ€ê²°! (ì •ë‹µ: í†µí–‰ë£Œë§Œ ì§€ë¶ˆ / ì˜¤ë‹µ: 2ë°° ì§€ë¶ˆ)<br>
                ë‚´ ë•…ì— ë‹¤ì‹œ ë„ì°©í•˜ë©´? í€´ì¦ˆë¥¼ ë§ì¶° <strong>í†µí–‰ë£Œë¥¼ 1.5ë°°</strong> ì˜¬ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>
                
                <h4>4. íŠ¹ìˆ˜ ì¹¸</h4>
                <p><strong>ê´‘ì•¼:</strong> 1ë²ˆ ì‰½ë‹ˆë‹¤. (ë”ë¸” ë‚˜ì˜¤ë©´ íƒˆì¶œ!)<br>
                <strong>ë‚˜ëˆ”:</strong> ëˆì„ ê¸°ë¶€í•˜ê±°ë‚˜, ìŒ“ì¸ ëˆì„ ê°€ì ¸ê°‘ë‹ˆë‹¤.<br>
                <strong>í™©ê¸ˆì—´ì‡ :</strong> ê¹œì§ ë¯¸ì…˜ì´ë‚˜ ì„ ë¬¼ì´ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.</p>
                
                <button class="btn btn-yes" onclick="document.getElementById('rules-modal').style.display='none'">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        const BOARD_SIZE = 20;
        
        const mapData = [
            { id: 0, name: "ì¶œë°œ", type: 0, price: 0, bgClass: "bg-start" },
            { id: 1, name: "ëª¨ì„¸ì˜¤ê²½", type: 1, price: 150, category: "pentateuch", bgClass: "bg-pentateuch", level: 0 },
            { id: 2, name: "ì—­ì‚¬ì„œ", type: 1, price: 180, category: "history", bgClass: "bg-history", level: 0 },
            { id: 3, name: "í™©ê¸ˆì—´ì‡ ", type: 2, price: 0, bgClass: "bg-key" },
            { id: 4, name: "ì†Œì„ ì§€ì„œ", type: 1, price: 200, category: "minor_prophets", bgClass: "bg-minor", level: 0 },
            { id: 5, name: "ê´‘ì•¼", type: 3, price: 0, bgClass: "bg-wilderness" },
            
            { id: 6, name: "ëŒ€ì„ ì§€ì„œ", type: 1, price: 220, category: "major_prophets", bgClass: "bg-major", level: 0 },
            { id: 7, name: "ì‹œê°€ì„œ", type: 1, price: 240, category: "poetry", bgClass: "bg-poetry", level: 0 },
            { id: 8, name: "í™©ê¸ˆì—´ì‡ ", type: 2, price: 0, bgClass: "bg-key" },
            { id: 9, name: "ë³µìŒì„œ", type: 1, price: 260, category: "gospels", bgClass: "bg-gospels", level: 0 },
            
            { id: 10, name: "ë‚˜ëˆ”", type: 4, price: 0, bgClass: "bg-sharing" },
            { id: 11, name: "ì‚¬ë„í–‰ì „", type: 1, price: 280, category: "acts", bgClass: "bg-acts", level: 0 },
            { id: 12, name: "ë°”ìš¸ì„œì‹ ", type: 1, price: 300, category: "pauline", bgClass: "bg-pauline", level: 0 },
            { id: 13, name: "í™©ê¸ˆì—´ì‡ ", type: 2, price: 0, bgClass: "bg-key" },
            { id: 14, name: "ì¼ë°˜ì„œì‹ ", type: 1, price: 320, category: "general", bgClass: "bg-general", level: 0 },
            
            { id: 15, name: "ì•ˆì‹ì²˜", type: 5, price: 0, bgClass: "bg-rest" },
            { id: 16, name: "ê³„ì‹œë¡", type: 1, price: 350, category: "revelation", bgClass: "bg-revelation", level: 0 },
            { id: 17, name: "ëª¨ì„¸ì˜¤ê²½ II", type: 1, price: 400, category: "pentateuch", bgClass: "bg-pentateuch", level: 0 },
            { id: 18, name: "í™©ê¸ˆì—´ì‡ ", type: 2, price: 0, bgClass: "bg-key" },
            { id: 19, name: "ë³µìŒì„œ II", type: 1, price: 450, category: "gospels", bgClass: "bg-gospels", level: 0 }
        ];

        const quizDatabase = {
            pentateuch: [
                { q: "íƒœì´ˆì— í•˜ë‚˜ë‹˜ì´ ì²œì§€ë¥¼ ë¬´ì—‡ìœ¼ë¡œ ì°½ì¡°í•˜ì…¨ë‚˜ìš”?", a: ["ë§ì”€", "í™", "ë¬¼"], c: 0 },
                { q: "ì—ë´ë™ì‚° ì¤‘ì•™ì— ìˆë˜ ë‚˜ë¬´ëŠ”?", a: ["ì„ ì•…ê³¼", "í¬ë„ë‚˜ë¬´", "ë¬´í™”ê³¼"], c: 0 },
                { q: "ë¯¿ìŒì˜ ì¡°ìƒì´ë¼ ë¶ˆë¦¬ëŠ” ì¸ë¬¼ì€?", a: ["ì•„ë¸Œë¼í•¨", "ì´ì‚­", "ì•¼ê³±"], c: 0 },
                { q: "ì´ìŠ¤ë¼ì—˜ ë°±ì„±ì´ ì• êµ½ì„ íƒˆì¶œí•  ë•Œ ì§€ë„ìëŠ”?", a: ["ëª¨ì„¸", "ì—¬í˜¸ìˆ˜ì•„", "ê°ˆë ™"], c: 0 },
                { q: "ì‹­ê³„ëª…ì„ ë°›ì€ ì‚°ì€?", a: ["ì‹œë‚´ì‚°", "ê°ëŒì‚°", "ê°ˆë©œì‚°"], c: 0 },
                { q: "í™í•´ê°€ ê°ˆë¼ì§€ëŠ” ê¸°ì ì´ ì¼ì–´ë‚œ ì±…ì€?", a: ["ì¶œì• êµ½ê¸°", "ì°½ì„¸ê¸°", "ë ˆìœ„ê¸°"], c: 0 },
                { q: "í˜•ë“¤ì˜ ë¯¸ì›€ì„ ë°›ì•„ ì• êµ½ìœ¼ë¡œ íŒ”ë ¤ê°„ ì‚¬ëŒì€?", a: ["ìš”ì…‰", "ë² ëƒë¯¼", "ìœ ë‹¤"], c: 0 },
                { q: "ì¸ë¥˜ ìµœì´ˆì˜ ì‚´ì¸ìëŠ”?", a: ["ê°€ì¸", "ì•„ë²¨", "ì…‹"], c: 0 },
                { q: "í•˜ë‚˜ë‹˜ì´ ì•„ë¸Œë¼í•¨ì—ê²Œ ë°”ì¹˜ë¼ê³  í•œ ì•„ë“¤ì€?", a: ["ì´ì‚­", "ì´ìŠ¤ë§ˆì—˜", "ì—ì„œ"], c: 0 },
                { q: "ë°©ì£¼ë¥¼ ë§Œë“¤ì–´ í™ìˆ˜ë¥¼ í”¼í•œ ì‚¬ëŒì€?", a: ["ë…¸ì•„", "ì—ë…¹", "ë¯€ë‘ì…€ë¼"], c: 0 }
            ],
            history: [
                { q: "ê°€ë‚˜ì•ˆ ë•…ì„ ì •íƒí•œ ì •íƒê¾¼ì˜ ìˆ˜ëŠ”?", a: ["12ëª…", "10ëª…", "2ëª…"], c: 0 },
                { q: "ì—¬ë¦¬ê³  ì„±ì€ ë©°ì¹  ë™ì•ˆ ëŒì•˜ë‚˜ìš”?", a: ["7ì¼", "3ì¼", "40ì¼"], c: 0 },
                { q: "í˜ì´ ì¥ì‚¬ì˜€ë˜ ì‚¬ì‚¬ëŠ”?", a: ["ì‚¼ì†", "ê¸°ë“œì˜¨", "ë“œë³´ë¼"], c: 0 },
                { q: "ë‹¤ìœ—ì´ ë¬¼ë¦¬ì¹œ ë¸”ë ˆì…‹ ì¥ìˆ˜ëŠ”?", a: ["ê³¨ë¦¬ì•—", "ì‹œìŠ¤ë¼", "ì•„ê°"], c: 0 },
                { q: "ì§€í˜œì˜ ì™•ìœ¼ë¡œ ë¶ˆë¦¬ëŠ” ì™•ì€?", a: ["ì†”ë¡œëª¬", "ë‹¤ìœ—", "ì‚¬ìš¸"], c: 0 },
                { q: "ì´ìŠ¤ë¼ì—˜ì˜ ì´ˆëŒ€ ì™•ì€?", a: ["ì‚¬ìš¸", "ë‹¤ìœ—", "ì‚¬ë¬´ì—˜"], c: 0 },
                { q: "ì£½ìœ¼ë©´ ì£½ìœ¼ë¦¬ë¼ ë§í•œ ì™•ë¹„ëŠ”?", a: ["ì—ìŠ¤ë”", "ì™€ìŠ¤ë””", "ë£»"], c: 0 },
                { q: "íš¨ì‹¬ì´ ì§€ê·¹í•œ ëª¨ì•• ì—¬ì¸ì€?", a: ["ë£»", "ë‚˜ì˜¤ë¯¸", "ì˜¤ë¥´ë°”"], c: 0 },
                { q: "ì„±ì „ ê±´ì¶•ì„ ì¤€ë¹„í•œ ì™•ì€?", a: ["ë‹¤ìœ—", "ì†”ë¡œëª¬", "íˆìŠ¤ê¸°ì•¼"], c: 0 },
                { q: "ì—˜ë¦¬ì•¼ê°€ ìŠ¹ì²œí•  ë•Œ íƒ€ê³  ê°„ ê²ƒì€?", a: ["ë¶ˆë§ê³¼ ë¶ˆìˆ˜ë ˆ", "êµ¬ë¦„", "ë…ìˆ˜ë¦¬"], c: 0 }
            ],
            minor_prophets: [
                { q: "ë¬¼ê³ ê¸° ë±ƒì†ì—ì„œ 3ì¼ì„ ë³´ë‚¸ ì„ ì§€ìëŠ”?", a: ["ìš”ë‚˜", "ìš”ì—˜", "ì•„ëª¨ìŠ¤"], c: 0 },
                { q: "ìŒë€í•œ ì—¬ì¸ ê³ ë©œê³¼ ê²°í˜¼í•œ ì„ ì§€ìëŠ”?", a: ["í˜¸ì„¸ì•„", "í•˜ë°•êµ­", "ë‚˜í›”"], c: 0 },
                { q: "ë² ë“¤ë ˆí—´ íƒ„ìƒì„ ì˜ˆì–¸í•œ ì„ ì§€ìëŠ”?", a: ["ë¯¸ê°€", "ë§ë¼ê¸°", "í•™ê°œ"], c: 0 },
                { q: "êµ¬ì•½ ì„±ê²½ì˜ ë§ˆì§€ë§‰ ì±…ì€?", a: ["ë§ë¼ê¸°", "ìŠ¤ê°€ë´", "ìŠ¤ë°”ëƒ"], c: 0 },
                { q: "ë‹ˆëŠì›¨ë¡œ ê°€ì„œ íšŒê°œë¥¼ ì™¸ì¹œ ì„ ì§€ìëŠ”?", a: ["ìš”ë‚˜", "ë‚˜í›”", "ì˜¤ë°”ëŒœ"], c: 0 },
                { q: "ì˜¤ì§ ì˜ì¸ì€ ë¯¿ìŒìœ¼ë¡œ ë§ë¯¸ì•”ì•„ ì‚´ë¦¬ë¼ í•œ ì„ ì§€ìëŠ”?", a: ["í•˜ë°•êµ­", "ìŠ¤ë°”ëƒ", "í•™ê°œ"], c: 0 },
                { q: "ì„±ì „ ì¬ê±´ì„ ë…ë ¤í•œ ì„ ì§€ìëŠ”?", a: ["í•™ê°œ", "ë§ë¼ê¸°", "ìš”ì—˜"], c: 0 },
                { q: "ë©”ëšœê¸° ì¬ì•™ì„ ì˜ˆì–¸í•œ ì„ ì§€ìëŠ”?", a: ["ìš”ì—˜", "ì•„ëª¨ìŠ¤", "ì˜¤ë°”ëŒœ"], c: 0 },
                { q: "ì •ì˜ë¥¼ ê°•ë¬¼ê°™ì´ íë¥´ê²Œ í•˜ë¼ê³  ì™¸ì¹œ ì„ ì§€ìëŠ”?", a: ["ì•„ëª¨ìŠ¤", "í˜¸ì„¸ì•„", "ë¯¸ê°€"], c: 0 },
                { q: "ê°€ì¥ ì§§ì€ êµ¬ì•½ ì„±ê²½ ì¤‘ í•˜ë‚˜ëŠ”?", a: ["ì˜¤ë°”ëŒœ", "ìš”ë‚˜", "ë‚˜í›”"], c: 0 }
            ],
            major_prophets: [
                { q: "ëˆˆë¬¼ì˜ ì„ ì§€ìë¡œ ë¶ˆë¦¬ëŠ” ì‚¬ëŒì€?", a: ["ì˜ˆë ˆë¯¸ì•¼", "ì´ì‚¬ì•¼", "ì—ìŠ¤ê²”"], c: 0 },
                { q: "ì‚¬ì êµ´ì—ì„œ ì‚´ì•„ë‚¨ì€ ì‚¬ëŒì€?", a: ["ë‹¤ë‹ˆì—˜", "ì‚¬ë“œë½", "ë©”ì‚­"], c: 0 },
                { q: "ë§ˆë¥¸ ë¼ˆê°€ ì‚´ì•„ë‚˜ëŠ” í™˜ìƒì„ ë³¸ ì„ ì§€ìëŠ”?", a: ["ì—ìŠ¤ê²”", "ë‹¤ë‹ˆì—˜", "ì´ì‚¬ì•¼"], c: 0 },
                { q: "ê³ ë‚œ ë°›ëŠ” ì¢…(ë©”ì‹œì•„)ì„ ì˜ˆì–¸í•œ ì„ ì§€ìëŠ”?", a: ["ì´ì‚¬ì•¼", "ì˜ˆë ˆë¯¸ì•¼", "ì—ìŠ¤ê²”"], c: 0 },
                { q: "ì˜ˆë£¨ì‚´ë ˜ì˜ ë©¸ë§ì„ ìŠ¬í¼í•˜ë©° ì“´ ë…¸ë˜ëŠ”?", a: ["ì˜ˆë ˆë¯¸ì•¼ì• ê°€", "ì•„ê°€", "ì „ë„ì„œ"], c: 0 },
                { q: "í’€ë¬´ë¶ˆì— ë˜ì ¸ì§„ ë‹¤ë‹ˆì—˜ì˜ ì¹œêµ¬ëŠ” ëª‡ ëª…?", a: ["3ëª…", "1ëª…", "4ëª…"], c: 0 },
                { q: "ë‹¤ë‹ˆì—˜ì´ í•´ì„í•œ ë²½ì— ì“°ì¸ ê¸€ì”¨ëŠ”?", a: ["ë©”ë„¤ ë©”ë„¤ ë°ê²”", "ì—˜ë¦¬ ì—˜ë¦¬ ë¼ë§ˆ", "ì—ë°”ë‹¤"], c: 0 },
                { q: "ìƒˆ ì–¸ì•½ì„ ì˜ˆì–¸í•œ ì„ ì§€ìëŠ”?", a: ["ì˜ˆë ˆë¯¸ì•¼", "ì´ì‚¬ì•¼", "ì—ìŠ¤ê²”"], c: 0 },
                { q: "í•˜ë‚˜ë‹˜ì˜ ë³´ì¢Œ í˜•ìƒì„ ë³¸ ì„ ì§€ìëŠ”?", a: ["ì—ìŠ¤ê²”", "ë‹¤ë‹ˆì—˜", "í˜¸ì„¸ì•„"], c: 0 },
                { q: "ì„ë§ˆëˆ„ì—˜ ì˜ˆì–¸ì´ ê¸°ë¡ëœ ì±…ì€?", a: ["ì´ì‚¬ì•¼", "ì˜ˆë ˆë¯¸ì•¼", "ë‹¤ë‹ˆì—˜"], c: 0 }
            ],
            poetry: [
                { q: "ì—¬í˜¸ì™€ëŠ” ë‚˜ì˜ ëª©ìì‹œë‹ˆ...ë¡œ ì‹œì‘í•˜ëŠ” ì‹œí¸ì€?", a: ["ì‹œí¸ 23í¸", "ì‹œí¸ 1í¸", "ì‹œí¸ 150í¸"], c: 0 },
                { q: "ì§€í˜œì˜ ì™• ì†”ë¡œëª¬ì´ ì£¼ë¡œ ì“´ ì±…ì€?", a: ["ì ì–¸", "ì‹œí¸", "ìš¥ê¸°"], c: 0 },
                { q: "ê³ ë‚œ ì¤‘ì— ì¸ë‚´í•œ ë™ë°©ì˜ ì˜ì¸ì€?", a: ["ìš¥", "ë‹¤ìœ—", "ì†”ë¡œëª¬"], c: 0 },
                { q: "í—›ë˜ê³  í—›ë˜ë©° í—›ë˜ê³  í—›ë˜ë‹ˆ...ë¡œ ì‹œì‘í•˜ëŠ” ì±…ì€?", a: ["ì „ë„ì„œ", "ì•„ê°€", "ì ì–¸"], c: 0 },
                { q: "ë‚¨ë…€ ê°„ì˜ ì‚¬ë‘ì„ ë…¸ë˜í•œ ì±…ì€?", a: ["ì•„ê°€", "ë£»ê¸°", "ì—ìŠ¤ë”"], c: 0 },
                { q: "ì‹œí¸ 1í¸ì— ë³µ ìˆëŠ” ì‚¬ëŒì€ ì–´ë””ì— ì•‰ì§€ ì•Šë‚˜ìš”?", a: ["ì˜¤ë§Œí•œ ìì˜ ìë¦¬", "ì£„ì¸ì˜ ê¸¸", "ì•…ì¸ì˜ ê¾€"], c: 0 },
                { q: "ì—¬í˜¸ì™€ë¥¼ ê²½ì™¸í•˜ëŠ” ê²ƒì´ ë¬´ì—‡ì˜ ê·¼ë³¸ì¸ê°€ìš”?", a: ["ì§€í˜œ", "ë¶€", "ì¥ìˆ˜"], c: 0 },
                { q: "ìš¥ì˜ ì„¸ ì¹œêµ¬ê°€ ì•„ë‹Œ ì‚¬ëŒì€?", a: ["ì—˜ë¦¬í›„", "ì—˜ë¦¬ë°”ìŠ¤", "ë¹Œë‹·"], c: 0 },
                { q: "ì‹œí¸ì„ ê°€ì¥ ë§ì´ ì“´ ì‚¬ëŒì€?", a: ["ë‹¤ìœ—", "ëª¨ì„¸", "ì†”ë¡œëª¬"], c: 0 },
                { q: "ì²­ë…„ì˜ ë•Œì— ë„ˆì˜ ì°½ì¡°ì£¼ë¥¼...?", a: ["ê¸°ì–µí•˜ë¼", "ì‚¬ë‘í•˜ë¼", "ë¯¿ìœ¼ë¼"], c: 0 }
            ],
            gospels: [
                { q: "ì˜ˆìˆ˜ë‹˜ì´ íƒœì–´ë‚˜ì‹  ê³³ì€?", a: ["ë² ë“¤ë ˆí—´", "ë‚˜ì‚¬ë ›", "ì˜ˆë£¨ì‚´ë ˜"], c: 0 },
                { q: "ì˜ˆìˆ˜ë‹˜ì´ ì²« ë²ˆì§¸ ê¸°ì ì„ í–‰í•˜ì‹  ê³³ì€?", a: ["ê°€ë‚˜", "ê°ˆë¦´ë¦¬", "ì‚¬ë§ˆë¦¬ì•„"], c: 0 },
                { q: "ì˜ˆìˆ˜ë‹˜ì´ ì„¸ë¡€ë¥¼ ë°›ìœ¼ì‹  ê°•ì€?", a: ["ìš”ë‹¨ê°•", "ë‚˜ì¼ê°•", "ìœ ë¸Œë¼ë°ê°•"], c: 0 },
                { q: "ì˜¤ë³‘ì´ì–´ì˜ ê¸°ì  ì¬ë£ŒëŠ”?", a: ["ë–¡ 5ê°œ ë¬¼ê³ ê¸° 2ë§ˆë¦¬", "ë–¡ 2ê°œ ë¬¼ê³ ê¸° 5ë§ˆë¦¬", "ë–¡ 7ê°œ"], c: 0 },
                { q: "ì˜ˆìˆ˜ë‹˜ì„ 3ë²ˆ ë¶€ì¸í•œ ì œìëŠ”?", a: ["ë² ë“œë¡œ", "ìš”í•œ", "ì•¼ê³ ë³´"], c: 0 },
                { q: "ì˜ˆìˆ˜ë‹˜ì„ ì€ 30ëƒ¥ì— íŒ ì œìëŠ”?", a: ["ê°€ë£Ÿ ìœ ë‹¤", "ë„ë§ˆ", "ì•ˆë“œë ˆ"], c: 0 },
                { q: "ì‚°ìƒìˆ˜í›ˆì—ì„œ ì‹¬ë ¹ì´ ê°€ë‚œí•œ ìê°€ ë°›ëŠ” ë³µì€?", a: ["ì²œêµ­", "ë•…", "ìœ„ë¡œ"], c: 0 },
                { q: "ì˜ˆìˆ˜ë‹˜ì´ ë¶€í™œí•˜ì‹  í›„ ë©°ì¹  ë§Œì— ìŠ¹ì²œí•˜ì…¨ë‚˜ìš”?", a: ["40ì¼", "3ì¼", "7ì¼"], c: 0 },
                { q: "ì‚­ê°œì˜¤ê°€ ì˜ˆìˆ˜ë‹˜ì„ ë³´ë ¤ê³  ì˜¬ë¼ê°„ ë‚˜ë¬´ëŠ”?", a: ["ë½•ë‚˜ë¬´", "ê°ëŒë‚˜ë¬´", "í¬ë„ë‚˜ë¬´"], c: 0 },
                { q: "ì£¼ê¸°ë„ë¬¸ì´ ê¸°ë¡ëœ ë³µìŒì„œëŠ”?", a: ["ë§ˆíƒœë³µìŒ", "ìš”í•œë³µìŒ", "ë§ˆê°€ë³µìŒ"], c: 0 }
            ],
            acts: [
                { q: "ì˜¤ìˆœì ˆì— ì„í•˜ì‹  ë¶„ì€ ëˆ„êµ¬ì¸ê°€ìš”?", a: ["ì„±ë ¹ë‹˜", "ì²œì‚¬", "ì„ ì§€ì"], c: 0 },
                { q: "ì´ˆëŒ€êµíšŒì˜ ì²« ë²ˆì§¸ ìˆœêµìëŠ”?", a: ["ìŠ¤ë°ë°˜", "ë¹Œë¦½", "ë°”ìš¸"], c: 0 },
                { q: "ì‚¬ìš¸ì´ íšŒì‹¬í•œ ì¥ì†ŒëŠ”?", a: ["ë‹¤ë©”ì„¹ ë„ìƒ", "ì˜ˆë£¨ì‚´ë ˜", "ì•ˆë””ì˜¥"], c: 0 },
                { q: "ì´ë°©ì¸ì—ê²Œ ì²˜ìŒ ë³µìŒì„ ì „í•œ ì œìëŠ”?", a: ["ë² ë“œë¡œ", "ì•¼ê³ ë³´", "ìš”í•œ"], c: 0 },
                { q: "ë°”ìš¸ê³¼ í•¨ê»˜ ì „ë„ ì—¬í–‰ì„ ë– ë‚œ ì‚¬ëŒì€?", a: ["ë°”ë‚˜ë°”", "ë§ˆê°€", "ëˆ„ê°€"], c: 0 },
                { q: "ë°”ìš¸ì´ ë¡œë§ˆ ì‹œë¯¼ê¶Œì„ ì‚¬ìš©í•œ ë„ì‹œëŠ”?", a: ["ì˜ˆë£¨ì‚´ë ˜/ë¹Œë¦½ë³´", "ì—ë² ì†Œ", "ê³ ë¦°ë„"], c: 0 },
                { q: "ì•„ë¦„ë‹¤ìš´ ë¬¸(ë¯¸ë¬¸)ì—ì„œ ê³ ì¹¨ ë°›ì€ ì‚¬ëŒì€?", a: ["ì•‰ì€ë±…ì´", "ì†Œê²½", "ë¬¸ë‘¥ë³‘ì"], c: 0 },
                { q: "ì´ˆëŒ€êµíšŒ ì„±ë„ë“¤ì´ ì²˜ìŒìœ¼ë¡œ 'ê·¸ë¦¬ìŠ¤ë„ì¸'ì´ë¼ ë¶ˆë¦° ê³³ì€?", a: ["ì•ˆë””ì˜¥", "ì˜ˆë£¨ì‚´ë ˜", "ë¡œë§ˆ"], c: 0 },
                { q: "ë°”ìš¸ì´ ë³µìŒì„ ì „í•˜ë‹¤ ê°‡íŒ ê°ì˜¥ì—ì„œ ì°¬ì†¡í•  ë•Œ ì¼ì–´ë‚œ ì¼ì€?", a: ["ì§€ì§„", "ë¶ˆ", "í™ìˆ˜"], c: 0 },
                { q: "ì‚¬ë„í–‰ì „ì˜ ì €ìëŠ”?", a: ["ëˆ„ê°€", "ë°”ìš¸", "ë² ë“œë¡œ"], c: 0 }
            ],
            pauline: [
                { q: "ì‚¬ë‘ì¥ì´ë¼ ë¶ˆë¦¬ëŠ” ì„±ê²½ì€?", a: ["ê³ ë¦°ë„ì „ì„œ 13ì¥", "ë¡œë§ˆì„œ 8ì¥", "ê°ˆë¼ë””ì•„ì„œ 5ì¥"], c: 0 },
                { q: "ì„±ë ¹ì˜ ì—´ë§¤ëŠ” ëª‡ ê°€ì§€ì¸ê°€ìš”?", a: ["9ê°€ì§€", "7ê°€ì§€", "12ê°€ì§€"], c: 0 },
                { q: "ë¯¿ìŒ, ì†Œë§, ì‚¬ë‘ ì¤‘ ì œì¼ì€?", a: ["ì‚¬ë‘", "ë¯¿ìŒ", "ì†Œë§"], c: 0 },
                { q: "ë°”ìš¸ì´ ì˜¥ì¤‘ì—ì„œ ì“´ ì„œì‹ (ì˜¥ì¤‘ì„œì‹ )ì´ ì•„ë‹Œ ê²ƒì€?", a: ["ë¡œë§ˆì„œ", "ì—ë² ì†Œì„œ", "ë¹Œë¦½ë³´ì„œ"], c: 0 },
                { q: "ì˜ì¸ì€ ë¬´ì—‡ìœ¼ë¡œ ë§ë¯¸ì•”ì•„ ì‚´ë¦¬ë¼ í–ˆë‚˜ìš”?", a: ["ë¯¿ìŒ", "í–‰í•¨", "ìœ¨ë²•"], c: 0 },
                { q: "ì „ì‹ ê°‘ì£¼ ì¤‘ ë¨¸ë¦¬ì— ì“°ëŠ” ê²ƒì€?", a: ["êµ¬ì›ì˜ íˆ¬êµ¬", "ì˜ì˜ í‰ë°°", "ë¯¿ìŒì˜ ë°©íŒ¨"], c: 0 },
                { q: "í•­ìƒ ê¸°ë»í•˜ë¼ ì‰¬ì§€ ë§ê³  ê¸°ë„í•˜ë¼ ë²”ì‚¬ì—...?", a: ["ê°ì‚¬í•˜ë¼", "ì‚¬ë‘í•˜ë¼", "ì°¬ì–‘í•˜ë¼"], c: 0 },
                { q: "ì£„ì˜ ì‚¯ì€ ë¬´ì—‡ì¸ê°€ìš”?", a: ["ì‚¬ë§", "ê³ í†µ", "ì§ˆë³‘"], c: 0 },
                { q: "ëˆ„êµ¬ë“ ì§€ ê·¸ë¦¬ìŠ¤ë„ ì•ˆì— ìˆìœ¼ë©´ ë¬´ì—‡ì´ ë˜ë‚˜ìš”?", a: ["ìƒˆë¡œìš´ í”¼ì¡°ë¬¼", "ì²œì‚¬", "ì œì‚¬ì¥"], c: 0 },
                { q: "ë°”ìš¸ì˜ ì˜ì  ì•„ë“¤ì¸ ë””ëª¨ë°ì—ê²Œ ë³´ë‚¸ í¸ì§€ëŠ”?", a: ["ë””ëª¨ë°ì „í›„ì„œ", "ë””ë„ì„œ", "ë¹Œë ˆëª¬ì„œ"], c: 0 }
            ],
            general: [
                { q: "í–‰í•¨ì´ ì—†ëŠ” ë¯¿ìŒì€ ì£½ì€ ê²ƒì´ë¼ ë§í•œ ì±…ì€?", a: ["ì•¼ê³ ë³´ì„œ", "ë² ë“œë¡œì „ì„œ", "ìš”í•œì¼ì„œ"], c: 0 },
                { q: "í•˜ë‚˜ë‹˜ì€ ì‚¬ë‘ì´ì‹œë¼ ë§í•œ ì‚¬ë„ëŠ”?", a: ["ìš”í•œ", "ë² ë“œë¡œ", "ë°”ìš¸"], c: 0 },
                { q: "ë¯¿ìŒì€ ë°”ë¼ëŠ” ê²ƒë“¤ì˜ ì‹¤ìƒì´ìš”... ì–´ëŠ ì±…ì¸ê°€ìš”?", a: ["íˆë¸Œë¦¬ì„œ", "ì•¼ê³ ë³´ì„œ", "ìœ ë‹¤ì„œ"], c: 0 },
                { q: "ì™• ê°™ì€ ì œì‚¬ì¥ì´ë¼ ì¹­í•œ ì±…ì€?", a: ["ë² ë“œë¡œì „ì„œ", "íˆë¸Œë¦¬ì„œ", "ìš”í•œì´ì„œ"], c: 0 },
                { q: "ê°€ì¥ ì§§ì€ ì‹ ì•½ ì„±ê²½ ì¤‘ í•˜ë‚˜ëŠ”?", a: ["ìš”í•œì´ì„œ", "ë¡œë§ˆì„œ", "ë§ˆíƒœë³µìŒ"], c: 0 },
                { q: "í˜€ë¥¼ ê¸¸ë“¤ì´ê¸° ì–´ë µë‹¤ê³  ê²½ê³ í•œ ì±…ì€?", a: ["ì•¼ê³ ë³´ì„œ", "ë² ë“œë¡œí›„ì„œ", "ìš”í•œì‚¼ì„œ"], c: 0 },
                { q: "ê±°ì§“ êµì‚¬ë“¤ì„ ê²½ê³„í•˜ë¼ê³  ì“´ ìœ ë‹¤ì„œëŠ” ëª‡ ì¥ì¸ê°€ìš”?", a: ["1ì¥", "2ì¥", "3ì¥"], c: 0 },
                { q: "ì˜ˆìˆ˜ë‹˜ì˜ ë™ìƒ ì•¼ê³ ë³´ê°€ ì“´ ì±…ì€?", a: ["ì•¼ê³ ë³´ì„œ", "ìœ ë‹¤ì„œ", "íˆë¸Œë¦¬ì„œ"], c: 0 },
                { q: "ë©œê¸°ì„¸ë±ì˜ ë°˜ì°¨ë¥¼ ë”°ë¥´ëŠ” ëŒ€ì œì‚¬ì¥ì€?", a: ["ì˜ˆìˆ˜ë‹˜", "ì•„ë¡ ", "ëª¨ì„¸"], c: 0 },
                { q: "ì‚¬ë‘í•˜ëŠ” ìì—¬ ë„¤ ì˜í˜¼ì´ ì˜ë¨ ê°™ì´...?", a: ["ë²”ì‚¬ê°€ ì˜ë˜ê³ ", "ë¶€ì ë˜ê³ ", "ìœ ëª…í•´ì§€ê³ "], c: 0 }
            ],
            revelation: [
                { q: "ìš”í•œê³„ì‹œë¡ì„ ê¸°ë¡í•œ ì‚¬ëŒì€?", a: ["ì‚¬ë„ ìš”í•œ", "ì„¸ë¡€ ìš”í•œ", "ë² ë“œë¡œ"], c: 0 },
                { q: "ê³„ì‹œë¡ì´ ê¸°ë¡ëœ ì¥ì†Œ(ì„¬)ëŠ”?", a: ["ë°§ëª¨ì„¬", "ì œì£¼ë„", "êµ¬ë¸Œë¡œ"], c: 0 },
                { q: "ì•„ì‹œì•„ì˜ ì¼ê³± êµíšŒ ì¤‘ ì²˜ìŒ ì‚¬ë‘ì„ ë²„ë¦° êµíšŒëŠ”?", a: ["ì—ë² ì†Œ", "ì„œë¨¸ë‚˜", "ë¼ì˜¤ë””ê²Œì•„"], c: 0 },
                { q: "ì°¨ì§€ë„ ë¥ì§€ë„ ì•Šì•„ í† í•´ë‚´ê² ë‹¤ê³  í•œ êµíšŒëŠ”?", a: ["ë¼ì˜¤ë””ê²Œì•„", "ë¹Œë¼ë¸ë¹„ì•„", "ì‚¬ë°"], c: 0 },
                { q: "ìƒˆ í•˜ëŠ˜ê³¼ ìƒˆ ë•…ì— ë‚´ë ¤ì˜¤ëŠ” ì„±ì€?", a: ["ìƒˆ ì˜ˆë£¨ì‚´ë ˜", "ë°”ë²¨ë¡ ", "ì—ë´"], c: 0 },
                { q: "ì˜ˆìˆ˜ë‹˜ì€ ì•ŒíŒŒì™€ ë¬´ì—‡ì´ë¼ í•˜ì…¨ë‚˜ìš”?", a: ["ì˜¤ë©”ê°€", "ë² íƒ€", "ê°ë§ˆ"], c: 0 },
                { q: "ì§ìŠ¹ì˜ í‘œ ìˆ«ìëŠ”?", a: ["666", "777", "144"], c: 0 },
                { q: "êµ¬ì›ë°›ì€ ì„±ë„ë“¤ì˜ ìˆ˜ëŠ”?", a: ["ì‹­ì‚¬ë§Œ ì‚¬ì²œ", "ì˜¤ì²œ", "ë§Œ ëª…"], c: 0 },
                { q: "ë‹¤ì‹œ ì˜¤ì‹¤ ì˜ˆìˆ˜ë‹˜ì„ ê¸°ë‹¤ë¦¬ë©° í•˜ëŠ” ë§ì€?", a: ["ë§ˆë¼ë‚˜íƒ€", "í• ë ë£¨ì•¼", "ì•„ë©˜"], c: 0 },
                { q: "ìƒëª…ìˆ˜ ê°•ê°€ì— ìˆëŠ” ë‚˜ë¬´ëŠ”?", a: ["ìƒëª…ë‚˜ë¬´", "ì„ ì•…ê³¼", "ë¬´í™”ê³¼"], c: 0 }
            ]
        };

        const colors = ['#FF5252', '#448AFF', '#69F0AE', '#E040FB'];
        const bgColors = ['#FFEBEE', '#E3F2FD', '#E8F5E9', '#F3E5F5']; // ë°°ê²½ìƒ‰ ë§¤í•‘
        
        // ê°•í™” ìƒ‰ìƒ (0:íšŒìƒ‰, 1:í•˜ëŠ˜, 2:ì´ˆë¡, 3:ë³´ë¼, 4:ë…¸ë‘, 5+:ê²€ì •)
        const getTollColor = (level) => {
            const levels = ['#9E9E9E', '#29B6F6', '#66BB6A', '#AB47BC', '#FFEB3B', '#212121'];
            return levels[Math.min(level, 5)];
        };

        class Game {
            constructor(playerNames) {
                this.players = [];
                this.currentPlayerIndex = 0;
                this.tiles = [];
                this.mapState = JSON.parse(JSON.stringify(mapData));
                this.isProcessing = false;
                this.lastDiceDouble = false;
                this.audioCtx = null;
                this.allLandsOwned = false; // ëª¨ë“  ë•… ì†Œìœ  ì—¬ë¶€ í”Œë˜ê·¸
                
                this.usedQuestions = {};
                for (let cat in quizDatabase) this.usedQuestions[cat] = new Set();

                playerNames.forEach((name, i) => {
                    this.players.push({
                        id: i,
                        name: name,
                        money: 2000, 
                        pos: 0,
                        color: colors[i],
                        bgColor: bgColors[i], // í”Œë ˆì´ì–´ ë°°ê²½ìƒ‰
                        skipTurn: 0,
                        properties: []
                    });
                });
            }

            initAudio() {
                if (!this.audioCtx) {
                    const AudioContext = window.AudioContext || window.webkitAudioContext;
                    this.audioCtx = new AudioContext();
                }
                if (this.audioCtx.state === 'suspended') {
                    this.audioCtx.resume();
                }
            }

            // ì •ë‹µ ì†Œë¦¬: ë”©ë™ë… (C5, E5, G5)
            playCorrectSound() {
                this.initAudio();
                const now = this.audioCtx.currentTime;
                const tones = [523.25, 659.25, 783.99]; // ë„, ë¯¸, ì†”
                
                tones.forEach((freq, idx) => {
                    const osc = this.audioCtx.createOscillator();
                    const gain = this.audioCtx.createGain();
                    
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(freq, now + idx * 0.2);
                    
                    gain.gain.setValueAtTime(0.1, now + idx * 0.2);
                    gain.gain.exponentialRampToValueAtTime(0.001, now + idx * 0.2 + 0.6);
                    
                    osc.connect(gain);
                    gain.connect(this.audioCtx.destination);
                    
                    osc.start(now + idx * 0.2);
                    osc.stop(now + idx * 0.2 + 0.6);
                });
            }

            // ì˜¤ë‹µ ì†Œë¦¬: ë•¡ (ë‚®ì€ í†±ë‹ˆíŒŒ + ê°ì‡ )
            playWrongSound() {
                this.initAudio();
                const now = this.audioCtx.currentTime;
                
                const osc = this.audioCtx.createOscillator();
                const gain = this.audioCtx.createGain();
                
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, now); // ë‚®ì€ ìŒ
                osc.frequency.linearRampToValueAtTime(100, now + 0.3); // í”¼ì¹˜ í•˜ê°•
                
                gain.gain.setValueAtTime(0.2, now);
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.3);
                
                osc.connect(gain);
                gain.connect(this.audioCtx.destination);
                
                osc.start(now);
                osc.stop(now + 0.3);
            }

            playRattleSound() {
                this.initAudio();
                const now = this.audioCtx.currentTime;
                for(let i=0; i<4; i++) {
                    const osc = this.audioCtx.createOscillator();
                    const gain = this.audioCtx.createGain();
                    const t = now + (Math.random() * 0.05); 
                    osc.frequency.value = 800 + Math.random() * 1000;
                    osc.type = 'triangle';
                    gain.gain.setValueAtTime(0.1, t);
                    gain.gain.exponentialRampToValueAtTime(0.001, t + 0.05); 
                    osc.connect(gain);
                    gain.connect(this.audioCtx.destination);
                    osc.start(t);
                    osc.stop(t + 0.05);
                }
            }

            playStepSound() {
                this.initAudio();
                const osc = this.audioCtx.createOscillator();
                const gain = this.audioCtx.createGain();
                osc.type = 'sine';
                osc.frequency.setValueAtTime(500, this.audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(800, this.audioCtx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.1, this.audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, this.audioCtx.currentTime + 0.15);
                osc.connect(gain);
                gain.connect(this.audioCtx.destination);
                osc.start();
                osc.stop(this.audioCtx.currentTime + 0.15);
            }

            triggerShake() {
                const container = document.getElementById('game-container');
                container.classList.remove('shake-effect'); // ë¦¬ì…‹
                void container.offsetWidth; // ë¦¬í”Œë¡œìš° íŠ¸ë¦¬ê±°
                container.classList.add('shake-effect');
            }

            triggerConfetti() {
                const colors = ['#f44336', '#2196F3', '#FFEB3B', '#4CAF50', '#E91E63'];
                
                for(let i=0; i<30; i++) {
                    const conf = document.createElement('div');
                    conf.className = 'confetti';
                    conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    conf.style.left = '50%';
                    conf.style.top = '50%';
                    document.body.appendChild(conf);

                    // ëœë¤ ë°©í–¥ ì• ë‹ˆë©”ì´ì…˜
                    const angle = Math.random() * Math.PI * 2;
                    const velocity = 50 + Math.random() * 100;
                    const tx = Math.cos(angle) * velocity;
                    const ty = Math.sin(angle) * velocity;

                    conf.animate([
                        { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                        { transform: `translate(${tx}px, ${ty}px) scale(0)`, opacity: 0 }
                    ], {
                        duration: 800 + Math.random() * 400,
                        easing: 'cubic-bezier(0, .9, .57, 1)',
                    }).onfinish = () => conf.remove();
                }
            }

            initBoard() {
                const boardEl = document.getElementById('board');
                const existingTiles = document.querySelectorAll('.tile');
                existingTiles.forEach(t => t.remove());

                const positions = [
                    {r:1, c:1}, {r:1, c:2}, {r:1, c:3}, {r:1, c:4}, {r:1, c:5}, {r:1, c:6},
                    {r:2, c:6}, {r:3, c:6}, {r:4, c:6}, {r:5, c:6},
                    {r:6, c:6}, {r:6, c:5}, {r:6, c:4}, {r:6, c:3}, {r:6, c:2}, {r:6, c:1},
                    {r:5, c:1}, {r:4, c:1}, {r:3, c:1}, {r:2, c:1}
                ];

                this.mapState.forEach((data, index) => {
                    const el = document.createElement('div');
                    let baseClass = `tile ${index % 5 === 0 ? 'corner' : ''} ${data.bgClass}`;
                    if (data.type === 1) baseClass += ' unowned';
                    else baseClass += ' special-tile';

                    el.className = baseClass;
                    el.style.gridRow = positions[index].r;
                    el.style.gridColumn = positions[index].c;
                    el.id = `tile-${index}`;
                    
                    let content = `<div class="tile-name">${data.name}</div>`;
                    if (data.type === 1) content += `<div class="tile-price">${data.price}</div>`; 
                    if (data.type === 4) content += `<div class="pot-amount">0</div>`; // ë‚˜ëˆ” ì ë¦½ê¸ˆ í‘œì‹œ
                    content += `<div class="tile-owner"></div>`;
                    
                    el.innerHTML = content;
                    boardEl.appendChild(el);
                    this.tiles.push(el);
                    
                    // ì´ˆê¸° ê°•í™” ìƒ‰ìƒ ì„¤ì • (íšŒìƒ‰)
                    if (data.type === 1) {
                        const priceEl = el.querySelector('.tile-price');
                        priceEl.style.backgroundColor = getTollColor(0);
                    }
                });

                this.createTokens();
                this.drawDiceFaces(1, 1);
                this.updateThemeColor();
                this.updatePlayerPanel();
                this.log("ì¤€ë¹„ ì™„ë£Œ! ì¹œêµ¬ë“¤ì•„ ëª¨ì—¬ë¼~ ğŸ‰");
            }

            createTokens() {
                document.querySelectorAll('.player-token').forEach(el => el.remove());
                const boardEl = document.getElementById('board');
                this.players.forEach((p, idx) => {
                    const token = document.createElement('div');
                    token.id = `token-${p.id}`;
                    token.className = 'player-token';
                    token.style.backgroundColor = p.color;
                    token.innerHTML = `<span class="token-name">${p.name}</span>`;
                    this.updateTokenPosition(token, 0, idx);
                    boardEl.appendChild(token);
                });
            }

            updateTokenPosition(tokenEl, posIndex, playerIdx) {
                const tile = document.getElementById(`tile-${posIndex}`);
                if (!tile) return;
                const offsetX = (playerIdx % 2) * 8 - 4; 
                const offsetY = Math.floor(playerIdx / 2) * 8 - 4;
                const top = tile.offsetTop + (tile.offsetHeight / 2) + offsetY;
                const left = tile.offsetLeft + (tile.offsetWidth / 2) + offsetX;
                tokenEl.style.top = `${top}px`;
                tokenEl.style.left = `${left}px`;
            }

            updateThemeColor() {
                const currentPlayer = this.players[this.currentPlayerIndex];
                document.documentElement.style.setProperty('--current-turn-color', currentPlayer.color);
                document.documentElement.style.setProperty('--current-turn-bg', currentPlayer.bgColor); // ë°°ê²½ìƒ‰ ì—…ë°ì´íŠ¸
            }

            updatePlayerPanel() {
                const panel = document.getElementById('player-panel');
                panel.innerHTML = '';
                this.players.forEach((p, idx) => {
                    const card = document.createElement('div');
                    card.className = `player-card ${idx === this.currentPlayerIndex ? 'active' : ''}`;
                    card.style.borderTopColor = p.color;
                    card.innerHTML = `
                        <div class="player-name" style="color:${p.color}">${p.name}</div>
                        <div class="player-money">${p.money} ë‹¬ë€íŠ¸</div>
                        <div style="font-size:0.8rem">ë•…: ${p.properties.length}ê³³</div>
                    `;
                    panel.appendChild(card);
                });
                
                const currentPlayer = this.players[this.currentPlayerIndex];
                const msg = this.lastDiceDouble 
                    ? `${currentPlayer.name} ì¹œêµ¬ ì°¨ë¡€! (ë”ë¸”!! ğŸ²)` 
                    : `${currentPlayer.name} ì¹œêµ¬ ì°¨ë¡€!`;
                
                const ind = document.getElementById('turn-indicator');
                ind.innerText = msg;
                ind.style.color = "white";
            }

            log(msg) {
                const logEl = document.getElementById('game-log');
                logEl.innerHTML = `<div>${msg}</div>`;
            }

            drawDiceFaces(val1, val2) {
                const getDots = (num) => {
                    let dots = '';
                    const pos = {
                        1: [5], 2: [1, 9], 3: [1, 5, 9], 4: [1, 3, 7, 9], 5: [1, 3, 5, 7, 9], 6: [1, 3, 4, 6, 7, 9]
                    };
                    for(let i=1; i<=9; i++) {
                        if (pos[num].includes(i)) dots += `<div class="dot" style="grid-area: ${Math.ceil(i/3)} / ${((i-1)%3)+1}"></div>`;
                        else dots += `<div></div>`;
                    }
                    return dots;
                };
                document.getElementById('die1').innerHTML = getDots(val1);
                document.getElementById('die2').innerHTML = getDots(val2);
            }

            async rollDice() {
                if (this.isProcessing) return;
                this.isProcessing = true;
                this.initAudio();

                const diceContainer = document.getElementById('dice-container');
                diceContainer.classList.add('rolling');
                
                let d1=1, d2=1;
                for(let i=0; i<12; i++) {
                    d1 = Math.floor(Math.random() * 6) + 1;
                    d2 = Math.floor(Math.random() * 6) + 1;
                    this.drawDiceFaces(d1, d2);
                    if(i % 3 === 0) this.playRattleSound(); 
                    await new Promise(r => setTimeout(r, 80));
                }
                
                diceContainer.classList.remove('rolling');
                this.lastDiceDouble = (d1 === d2);
                const total = d1 + d2;

                const player = this.players[this.currentPlayerIndex];
                if (player.skipTurn > 0) {
                    if (this.lastDiceDouble) {
                        player.skipTurn = 0;
                        this.log(`âœ¨ ë”ë¸”! ${player.name} ì¹œêµ¬ê°€ ê´‘ì•¼ë¥¼ íƒˆì¶œí–ˆì–´!`);
                        await this.movePlayer(player, total);
                        return; 
                    } else {
                        player.skipTurn--;
                        this.log(`${player.name} ì¹œêµ¬ëŠ” ì‰¬ëŠ” ì¤‘... (${player.skipTurn}ë²ˆ ë‚¨ìŒ)`);
                        this.lastDiceDouble = false;
                        this.checkNextTurn();
                        return;
                    }
                }

                this.log(`${player.name}: ${total}ì¹¸ ì´ë™! (${d1}, ${d2})`);
                await this.movePlayer(player, total);
            }

            async movePlayer(player, steps) {
                const tokenEl = document.getElementById(`token-${player.id}`);

                for (let i = 0; i < steps; i++) {
                    player.pos = (player.pos + 1) % BOARD_SIZE;
                    if (player.pos === 0) {
                        player.money += 200;
                        this.log("ì¶œë°œì  í†µê³¼! ìš©ëˆ +200 ë‹¬ë€íŠ¸ ğŸ’°");
                        
                        // ê²Œì„ ì¢…ë£Œ ì¡°ê±´ ì²´í¬: ëª¨ë“  ë•… ì†Œìœ  & í”Œë ˆì´ì–´ê°€ ì¶œë°œì  í†µê³¼ (ë§ˆì§€ë§‰ì— í†µê³¼í•œ ì‚¬ëŒ ê¸°ì¤€)
                        if (this.allLandsOwned) {
                            this.endGame();
                            return; // ì´ë™ ì¤‘ì§€ ë° ì¢…ë£Œ
                        }
                    }
                    this.updateTokenPosition(tokenEl, player.pos, player.id);
                    this.playStepSound();
                    await new Promise(r => setTimeout(r, 300));
                }
                this.handleTile(player);
            }

            handleTile(player) {
                const tileIdx = player.pos;
                const tileData = this.mapState[tileIdx];

                if (tileData.type === 1) {
                    if (tileData.owner === undefined) {
                        // ë¹ˆ ë•…: êµ¬ë§¤ ì‹œë„
                        if (player.money >= tileData.price) {
                            this.startQuiz(player, tileData, 'buy');
                        } else {
                            this.log("ëˆì´ ë¶€ì¡±í•´ì„œ ì‚´ ìˆ˜ ì—†ì–´ ã… ã… ");
                            this.checkNextTurn();
                        }
                    } else if (tileData.owner !== player.id) {
                        // ë‚¨ì˜ ë•…: í†µí–‰ë£Œ
                        const owner = this.players[tileData.owner];
                        this.log(`${owner.name} ì¹œêµ¬ ë•…ì´ì•¼! í€´ì¦ˆ í’€ì–´ë³¼ê¹Œ?`);
                        this.startQuiz(player, tileData, 'toll', owner);
                    } else {
                        // ë‚´ ë•…: ì—…ê·¸ë ˆì´ë“œ ê¸°íšŒ
                        this.log("ë‚´ ë•…ì— ë‹¤ì‹œ ì™”ì–´! ì—…ê·¸ë ˆì´ë“œ ë„ì „!");
                        this.startQuiz(player, tileData, 'upgrade');
                    }
                } 
                else if (tileData.type === 2) {
                    this.handleGoldenKey(player);
                }
                else if (tileData.type === 3) {
                    // ê´‘ì•¼: 1íšŒ íœ´ì‹ (ìˆ˜ì •ë¨)
                    player.skipTurn = 1;
                    this.lastDiceDouble = false;
                    this.showMessage("ê´‘ì•¼ ë„ì°© ğŸŒµ", "ê´‘ì•¼ì—ì„œ ì ì‹œ ì‰¬ì–´ê°€ìš”. (1ë²ˆ íœ´ì‹)", () => this.checkNextTurn());
                }
                else if (tileData.type === 4) {
                    // ë‚˜ëˆ”: ê¸°ë¶€ ë˜ëŠ” íšë“ (ìˆ˜ì •ë¨)
                    this.handleSharing(player, tileData);
                }
                else {
                    this.checkNextTurn();
                }
                this.updatePlayerPanel();
            }

            handleSharing(player, tileData) {
                if (!tileData.pot) tileData.pot = 0;

                if (tileData.pot > 0) {
                    // ëˆì´ ìˆìœ¼ë©´ ê°€ì ¸ê°
                    const amount = tileData.pot;
                    player.money += amount;
                    tileData.pot = 0;
                    this.updatePotDisplay(tileData.id, 0);
                    this.showMessage("ë‚˜ëˆ” íšë“! ğŸ", `ì™€! ëª¨ê¸ˆí•¨ì— ìˆë˜ ${amount}ë‹¬ë€íŠ¸ë¥¼ ë°›ì•˜ì–´!`, () => this.checkNextTurn());
                } else {
                    // ëˆì´ ì—†ìœ¼ë©´ 100 ê¸°ë¶€
                    const donation = 100;
                    player.money -= donation;
                    tileData.pot = donation;
                    this.updatePotDisplay(tileData.id, donation);
                    this.showMessage("ë‚˜ëˆ” ì‹¤ì²œ ğŸ’–", `ë‹¤ìŒ ì¹œêµ¬ë¥¼ ìœ„í•´ ${donation}ë‹¬ë€íŠ¸ë¥¼ ëª¨ê¸ˆí•¨ì— ë„£ì—ˆì–´!`, () => this.checkNextTurn());
                }
            }

            updatePotDisplay(tileId, amount) {
                const tileEl = document.getElementById(`tile-${tileId}`);
                const potEl = tileEl.querySelector('.pot-amount');
                if (amount > 0) {
                    potEl.innerText = amount;
                    potEl.style.display = 'block';
                } else {
                    potEl.style.display = 'none';
                }
            }

            handleGoldenKey(player) {
                const keys = [
                    { msg: "ê¸¸ì—ì„œ ë§Œë‚˜ë¥¼ ì£¼ì› ì–´! ğŸ (+100ë‹¬ë€íŠ¸)", val: 100 },
                    { msg: "êµíšŒë¥¼ ê³ ì¹˜ëŠ” ë° í—Œê¸ˆí–ˆì–´ ğŸ”¨ (-150ë‹¬ë€íŠ¸)", val: -150 },
                    { msg: "ì„ êµì‚¬ë‹˜ì„ ë„ì™”ì–´ âœˆï¸ (-100ë‹¬ë€íŠ¸)", val: -100 },
                    { msg: "ì¹­ì°¬ ìŠ¤í‹°ì»¤ ë³´ë„ˆìŠ¤! â­ (+200ë‹¬ë€íŠ¸)", val: 200 }
                ];
                const pick = keys[Math.floor(Math.random() * keys.length)];
                player.money += pick.val;
                this.showMessage("í™©ê¸ˆì—´ì‡  ğŸ—ï¸", pick.msg, () => this.checkNextTurn());
            }

            startQuiz(player, tileData, mode, owner = null) {
                const modal = document.getElementById('quiz-modal');
                const qCat = document.getElementById('quiz-category');
                const qCtx = document.getElementById('quiz-context');
                const qText = document.getElementById('quiz-question');
                const qOpts = document.getElementById('quiz-options');
                
                const category = tileData.category;
                const pool = quizDatabase[category];
                let availableIndices = pool.map((_, i) => i).filter(i => !this.usedQuestions[category].has(i));
                
                if (availableIndices.length === 0) {
                    this.usedQuestions[category].clear();
                    availableIndices = pool.map((_, i) => i);
                }

                const randIdx = availableIndices[Math.floor(Math.random() * availableIndices.length)];
                this.usedQuestions[category].add(randIdx);
                const q = pool[randIdx];
                const correctAnswer = q.a[q.c]; // ì •ë‹µ ì €ì¥

                qCat.innerText = tileData.name;
                qText.innerText = q.q;
                
                if (mode === 'buy') {
                    qCtx.innerText = `[ë•… ì‚¬ê¸°] í€´ì¦ˆë¥¼ ë§ì¶”ë©´ ë‚´ ë•…ì´ ë¼! (ë¹„ìš©: ${tileData.price})`;
                } else if (mode === 'toll') {
                    qCtx.innerText = `[í†µí–‰ë£Œ ë‚´ê¸°] ë§ì¶”ë©´ ${tileData.price}ë§Œ ë‚´ê³ , í‹€ë¦¬ë©´ 2ë°°ì•¼!`;
                } else if (mode === 'upgrade') {
                    qCtx.innerText = `[ì—…ê·¸ë ˆì´ë“œ] ë§ì¶”ë©´ í†µí–‰ë£Œê°€ 1.5ë°°ë¡œ ì˜¬ë¼ê°€!`;
                }

                qOpts.innerHTML = '';
                const answers = q.a.map((ans, i) => ({ text: ans, isCorrect: i === q.c }));
                answers.sort(() => Math.random() - 0.5);

                answers.forEach(ans => {
                    const btn = document.createElement('button');
                    btn.className = 'btn btn-quiz';
                    btn.innerText = ans.text;
                    btn.onclick = () => {
                        modal.style.display = 'none';
                        this.resolveQuiz(player, tileData, mode, ans.isCorrect, owner, correctAnswer);
                    };
                    qOpts.appendChild(btn);
                });

                modal.style.display = 'flex';
            }

            resolveQuiz(player, tileData, mode, isCorrect, owner, correctAnswer) {
                if (mode === 'buy') {
                    if (isCorrect) {
                        this.playCorrectSound();
                        this.triggerConfetti();
                        player.money -= tileData.price;
                        tileData.owner = player.id;
                        player.properties.push(tileData.id);
                        
                        const tileEl = document.getElementById(`tile-${tileData.id}`);
                        tileEl.style.borderColor = player.color;
                        tileEl.classList.remove('unowned');
                        tileEl.classList.add('owned');
                        
                        this.showMessage("ì •ë‹µì´ì•¼! ğŸ‘", `${tileData.name} ë•… ì£¼ì¸ì´ ë˜ì—ˆì–´!`, () => this.checkAllLandsOwned());
                    } else {
                        this.playWrongSound();
                        this.triggerShake();
                        this.showMessage("ë•¡! ì•„ì‰½ë‹¤ ğŸ˜…", `í‹€ë ¸ì–´ ã… ã…  ì •ë‹µì€ [${correctAnswer}]ì•¼.`, () => this.checkNextTurn());
                    }
                } else if (mode === 'toll') {
                    let cost = tileData.price;
                    if (isCorrect) {
                        this.playCorrectSound();
                        this.triggerConfetti();
                        this.showMessage("ì •ë‹µ! ğŸ‘", `ì˜í–ˆì–´! í†µí–‰ë£Œ(${cost}ë‹¬ë€íŠ¸)ë§Œ ë‚¼ê²Œ.`, () => {
                            this.payToll(player, owner, cost);
                        });
                    } else {
                        this.playWrongSound();
                        this.triggerShake();
                        cost *= 2;
                        this.showMessage("ë•¡! ğŸ˜±", `í‹€ë ¸ì–´ ã… ã…  ì •ë‹µì€ [${correctAnswer}]ì•¼. ë²Œê¸ˆê¹Œì§€ 2ë°°(${cost}ë‹¬ë€íŠ¸)ë¥¼ ë‚´ì•¼ í•´.`, () => {
                            this.payToll(player, owner, cost);
                        });
                    }
                } else if (mode === 'upgrade') {
                    if (isCorrect) {
                        this.playCorrectSound();
                        this.triggerConfetti();
                        // 1.5ë°° ì¸ìƒ (ì •ìˆ˜ ì²˜ë¦¬)
                        tileData.price = Math.floor(tileData.price * 1.5);
                        tileData.level = (tileData.level || 0) + 1; // ë ˆë²¨ ì¦ê°€
                        
                        // UI ì—…ë°ì´íŠ¸ (ê°€ê²© ë° ìƒ‰ìƒ)
                        const tileEl = document.getElementById(`tile-${tileData.id}`);
                        const priceEl = tileEl.querySelector('.tile-price');
                        priceEl.innerText = tileData.price;
                        priceEl.style.backgroundColor = getTollColor(tileData.level);

                        this.showMessage("ì—…ê·¸ë ˆì´ë“œ ì„±ê³µ! âœ¨", `ì´ ë•…ì˜ í†µí–‰ë£Œê°€ ${tileData.price}ë‹¬ë€íŠ¸ë¡œ ì˜¬ëì–´!`, () => this.checkNextTurn());
                    } else {
                        this.playWrongSound();
                        this.triggerShake();
                        this.showMessage("ì•„ê¹ë‹¤! ğŸ˜…", `í‹€ë ¸ì–´ ã… ã…  ì •ë‹µì€ [${correctAnswer}]ì•¼. ì—…ê·¸ë ˆì´ë“œ ì‹¤íŒ¨!`, () => this.checkNextTurn());
                    }
                }
            }

            payToll(player, owner, amount) {
                player.money -= amount;
                owner.money += amount;
                this.checkNextTurn();
            }

            checkAllLandsOwned() {
                const totalBuyable = this.mapState.filter(t => t.type === 1).length;
                const ownedCount = this.mapState.filter(t => t.type === 1 && t.owner !== undefined).length;

                if (totalBuyable === ownedCount) {
                    this.allLandsOwned = true;
                    this.showMessage("ë§ˆì§€ë§‰ ë¼ìš´ë“œ! ğŸš©", "ëª¨ë“  ë•… ì£¼ì¸ì´ ì •í•´ì¡Œì–´! ì´ì œ ëˆ„êµ¬ë“  ì¶œë°œì ì„ í†µê³¼í•˜ë©´ ê²Œì„ì´ ëë‚˜!", () => this.checkNextTurn());
                } else {
                    this.checkNextTurn();
                }
            }

            endGame() {
                let winner = null;
                let maxAssets = -99999;
                let msg = "ğŸ‰ ì™€ì•„! ê²Œì„ ë! ğŸ‰\n\n";

                this.players.forEach(p => {
                    let assets = p.money;
                    p.properties.forEach(tid => {
                        assets += this.mapState[tid].price;
                    });
                    msg += `${p.name}: ${assets} ë‹¬ë€íŠ¸\n`;
                    if (assets > maxAssets) {
                        maxAssets = assets;
                        winner = p;
                    }
                });

                msg += `\nì˜¤ëŠ˜ì˜ 1ë“±ì€... [${winner.name}] ì¹œêµ¬!! ì¶•í•˜í•´! ğŸ†`;
                alert(msg);
                location.reload();
            }

            checkNextTurn() {
                if (this.players[this.currentPlayerIndex].money < 0) {
                    alert(`${this.players[this.currentPlayerIndex].name} ì¹œêµ¬ íŒŒì‚°! ã… ã… `);
                    this.players[this.currentPlayerIndex].money = 0;
                }

                if (this.lastDiceDouble) {
                    this.log("ë”ë¸”ì´ë‹¤! í•œ ë²ˆ ë” êµ´ë ¤!");
                    this.isProcessing = false;
                    this.updatePlayerPanel(); 
                } else {
                    this.currentPlayerIndex = (this.currentPlayerIndex + 1) % this.players.length;
                    this.isProcessing = false;
                    this.updateThemeColor();
                    this.updatePlayerPanel();
                }
            }

            showMessage(title, msg, callback) {
                const modal = document.getElementById('action-modal');
                document.getElementById('action-title').innerText = title;
                document.getElementById('action-msg').innerText = msg;
                const btn = document.getElementById('btn-confirm');
                btn.onclick = () => {
                    modal.style.display = 'none';
                    if (callback) callback();
                };
                modal.style.display = 'flex';
            }
        }

        let game;
        let selectedPlayerCount = 0;

        function setupNames(count) {
            selectedPlayerCount = count;
            document.getElementById('setup-step-1').style.display = 'none';
            document.getElementById('setup-step-2').style.display = 'block';
            
            const container = document.getElementById('name-inputs-container');
            container.innerHTML = '';
            for(let i=1; i<=count; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'name-input';
                input.placeholder = `ì¹œêµ¬ ${i} ì´ë¦„`;
                input.id = `input-name-${i}`;
                input.value = `ì¹œêµ¬ ${i}`;
                container.appendChild(input);
            }
        }

        function startGameWithNames() {
            const names = [];
            for(let i=1; i<=selectedPlayerCount; i++) {
                const val = document.getElementById(`input-name-${i}`).value.trim();
                names.push(val || `ì¹œêµ¬ ${i}`);
            }
            
            const setupScreen = document.getElementById('setup-screen');
            const gameContainer = document.getElementById('game-container');

            // 1. í™”ë©´ ì „í™˜ (Setup -> Game)
            setupScreen.style.display = 'none';
            gameContainer.style.display = 'flex';

            // 2. ê²Œì„ ì´ˆê¸°í™”
            game = new Game(names);
            game.initBoard();
            
            setTimeout(() => {
                window.addEventListener('resize', () => {
                    if(game) game.players.forEach(p => {
                        const token = document.getElementById(`token-${p.id}`);
                        if(token) game.updateTokenPosition(token, p.pos, p.id);
                    });
                });
            }, 100);
        }
    </script>
</body>
</html>